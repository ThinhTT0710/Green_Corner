@model EventReviewDTO
@{
    ViewData["Title"] = "Đánh giá sự kiện";
}
<div class="comment-form">
<h3 class="mb-15">Cập nhật đánh giá sự kiện</h3>
<div class="row">
    <div class="col-lg-9 col-md-12">
<form asp-controller="Event" asp-action="EditEventReview" enctype="multipart/form-data">
    <input hidden asp-for="EventReviewId" />
    <input hidden asp-for="CreatedAt" />
    <input hidden asp-for="CleanEventId" />
    <input hidden asp-for="UserId" />
    <div class="row">
        <div class="col-12">
            <div>
                        @for (int i = 1; i <= 5; i++)
                        {
                                <input required type="radio" name="rating" id="star-@i" value="@i"
                            @(i == Model.Rating ? "checked" : "") style="display: none;" />
                            <label for="star-@i"
                                   style="font-size: 30px; color:@(i <= Model.Rating ? "orange" : "gray"); cursor: pointer;"
                                   onmouseover="highlightStars(@i)"
                                   onmouseout="resetStars()"
                                   onclick="selectStar(@i)">&#9733;</label>
                                <span asp-validation-for="Rating" class="text-danger"></span>
                        }
            </div>
        </div>
        <div class="col-12">
            <div class="form-group">
                <input required asp-validation-for="Comment" asp-for="Comment" class="form-control" placeholder="Nội dung" />
                            <span asp-validation-for="Comment" class="text-danger"></span>
                        </div>
        </div>
    </div>
    <div class="form-group">
        <a asp-controller="Event" asp-action="EventReviewHistory" class="button button-contactForm ">Quay lại danh sách</a>
        <button type="submit" class="button button-contactForm">Lưu</button>
    </div>
</form>
    </div>
</div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
<script>
    let selectedRating = Model.Rating;

    function highlightStars(rating) {
        for (let i = 1; i <= 5; i++) {
            const label = document.querySelector(`label[for='star-${i}']`);
            label.style.color = i <= rating ? 'orange' : 'gray';
        }
    }

    function resetStars() {
        for (let i = 1; i <= 5; i++) {
            const label = document.querySelector(`label[for='star-${i}']`);
            label.style.color = i <= selectedRating ? 'orange' : 'gray';
        }
    }

    function selectStar(rating) {
        selectedRating = rating;
        document.getElementById(`star-${rating}`).checked = true;
        document.getElementById("rating-value").textContent = `${rating}/5`;
        resetStars();
    }
</script>