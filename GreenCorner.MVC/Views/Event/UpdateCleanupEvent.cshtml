@model EventDTO

<form asp-controller="Event" asp-action="UpdateCleanupEvent" enctype="multipart/form-data">
    <input hidden asp-for="CleanEventId" />
    <input hidden asp-for="CreatedAt" />
    <input hidden asp-for="Status" />
    <input hidden asp-for="EndDate" />
    <section class="content-main">
        <div class="row">
            <div class="col-9">
                <div class="content-header">
                    <h2 class="content-title">Update Cleanup Event</h2>
                    <div>
                        <button style="color: yellow" class="btn btn-light rounded font-sm mr-5 text-body hover-up"><a asp-controller="Event" asp-action="GetAllEvent">Back to List</a></button>
                        <button type="submit" class="btn btn-md rounded font-sm hover-up">Update</button>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card mb-4">
                    <div class="card-header">
                        <h4>Basic</h4>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-4">
                                <label for="product_name" class="form-label">Title</label>
                                <input type="text" placeholder="Type here" class="form-control" asp-validation-for="Title" asp-for="Title" required />
                                <span asp-validation-for="Title" class="text-danger"></span>
                            </div>
                            <div class="mb-4">
                                <label class="form-label">Description</label>
                                <textarea asp-validation-for="Address" asp-for="Description" placeholder="Type here" class="form-control" rows="4" required></textarea>
                                <span asp-validation-for="Description" class="text-danger"></span>
                            </div>
                            <div class="mb-4">
                                <label for="product_name" class="form-label">Max Participant</label>
                                <input type="number" placeholder="Type here" class="form-control" asp-validation-for="MaxParticipants" asp-for="MaxParticipants" required />
                                <span asp-validation-for="MaxParticipants" class="text-danger"></span>
                            </div>
                            <div class="mb-4">
                                <label for="product_name" class="form-label">Start Date</label>
                                <input name="StartDate" id="StartDate" type="date" placeholder="Type here" class="form-control" asp-validation-for="StartDate" required asp-for="StartDate" />
                                <div id="startDateError" class="text-danger mt-1"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</form>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const input = document.getElementById("StartDate");
            const errorDiv = document.getElementById("startDateError");

            // Lưu giá trị ban đầu (hợp lệ)
            let lastValidDate = input.value;

            input.addEventListener("change", function () {
                const selectedDate = new Date(this.value);
                const today = new Date();

                selectedDate.setHours(0, 0, 0, 0);
                today.setHours(0, 0, 0, 0);

                if (selectedDate <= today) {
                    // Nếu ngày không hợp lệ
                    errorDiv.textContent = "Ngày bắt đầu phải lớn hơn ngày hôm nay.";
                    this.value = lastValidDate; // Gán lại ngày cũ
                } else {
                    // Nếu hợp lệ, cập nhật ngày cũ
                    errorDiv.textContent = "";
                    lastValidDate = this.value;
                }
            });
        });
    </script>
}