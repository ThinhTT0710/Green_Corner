@model LeaderReviewDTO

<div class="comment-form">
    <h3 class="mb-15">Leader Review</h3>
    <div class="row">
        <div class="col-lg-9 col-md-12">
            <form asp-controller="Event" asp-action="LeaderReview" enctype="multipart/form-data">
                <input hidden asp-for="CleanEventId" class="form-control" value="@ViewBag.EventId" />
                <input hidden asp-for="LeaderId" class="form-control" value="@ViewBag.UserId" />
                <div class="row">
                    <div class="col-12">
                        <div>
                            @for (int i = 1; i <= 5; i++)
                            {
                                <input required asp-for="Rating" type="radio" id="star-@i" name="rating" value="@i" style="display: none;" />
                                <label for="star-@i" style="font-size: 24px; color: gray; cursor: pointer;"
                                       onmouseover="highlightStars(@i)"
                                       onmouseout="resetStars()"
                                       onclick="selectStar(@i)">&#9733;</label>
                                <span asp-validation-for="Rating" class="text-danger"></span>
                            }
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group">
                            <input required asp-for="Comment" class="form-control" placeholder="Comment" />
                            <span asp-validation-for="Comment" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <a asp-controller="User" asp-action="ViewParticipatedActivities" class="button button-contactForm ">Back to List</a>
                    <button type="submit" class="button button-contactForm">Rate</button>
                </div>
            </form>
        </div>
    </div>
</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
<script>
    let selectedRating = 0;

    function highlightStars(rating) {
        for (let i = 1; i <= 5; i++) {
            const label = document.querySelector(`label[for='star-${i}']`);
            label.style.color = i <= rating ? 'orange' : 'gray';
        }
    }

    function resetStars() {
        for (let i = 1; i <= 5; i++) {
            const label = document.querySelector(`label[for='star-${i}']`);
            label.style.color = i <= selectedRating ? 'orange' : 'gray';
        }
    }

    function selectStar(rating) {
        selectedRating = rating;
        document.getElementById(`star-${rating}`).checked = true;
        resetStars();
    }
</script>